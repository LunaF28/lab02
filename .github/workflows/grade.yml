# Basic workflow
name: Grade Reports

# Controls when the action will run. Workflow begins with push or PR events.
# Focuses on the main branch only.
on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

# Create one single job. This job performs all necessary checks.
jobs:
  grade:
    # Use the latest version of Ubuntu on Microsoft Azure.
    runs-on: ubuntu-latest

    # Define the workflow steps.
    steps:
      # Checkout the code of the repository.
      - name: Check out Repository Code
        uses: actions/checkout@v2

      # Check for TODO comments in files.
      - name: Check for TODOs
        run: |
          ! grep -L "TODO" writing/*.md

      # Check minimum word count in reflection.md solutions.
      - name: Check Minimum Word Count in reflection.md
        run: |
          word_count=$(wc -w < writing/reflection.md)
          min_word_count=300
          if [ "$word_count" -lt "$min_word_count" ]; then
            echo "Error: Not enough words in reflection.md. Minimum required is $min_word_count, found $word_count."
            exit 1
          fi
